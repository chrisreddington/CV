{{ $content := .content }}
{{ $image := resources.Get $content.image }}

{{ $tiny := .tiny }}
{{ $small := .small }}
{{ $medium := .medium }}
{{ $large := .large }}
{{ $lazy := .lazy }}

{{ $tinyImage := ($image.Resize (printf "%sx webp" (string $tiny) )) }}
{{ $smallImage := ($image.Resize (printf "%sx webp" (string $small) )) }}
{{ $mediumImage := ($image.Resize (printf "%sx webp" (string $medium) )) }}
{{ $largeImage := ($image.Resize (printf "%sx webp" (string $large) )) }}

<a href="{{ $content.url | relURL }}">
  <img class="img-fluid"
        loading="lazy"
        srcset="
            {{- with $tinyImage.RelPermalink -}}{{.}} 480w{{- end -}}
            {{- with $smallImage.RelPermalink -}}, {{.}} 768w{{- end -}}
            {{- with $mediumImage.RelPermalink -}}, {{.}} 1024w{{- end -}}
            {{- with $largeImage.RelPermalink -}}, {{.}} 1366w{{- end -}}" 
        src="{{ $image.RelPermalink }}" 
        sizes="(max-width: 600px) 480px,
               (max-width: 800px) 480px,
               (max-width: 1050px) 480px,
               768px"
        alt="{{ $content.Title }}" 
        title="{{ $content.Title }}" />
</a>